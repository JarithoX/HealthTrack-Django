{% extends 'base.html' %} 

{% block title %}Inicio - Health Track{% endblock %} 

{% block content %}
<div class="container py-5">

    <div class="p-5 mb-5 bg-primary bg-gradient rounded-4 text-white shadow-sm position-relative overflow-hidden">
        <div class="position-relative z-1">
            <h1 class="display-5 fw-bold">Â¡Hola, {{ nombre_usuario }}! ðŸ‘‹</h1>
            <p class="col-md-8 fs-4 mt-2">Hoy es un gran dÃ­a para construir tu mejor versiÃ³n.</p>
            <div class="mt-4">
                <a href="{% url 'habitos:registro_habito' %}" class="btn btn-light btn-lg px-4 fw-bold text-primary shadow-sm">
                    <i class="bi bi-calendar-check me-2"></i>Registrar mi DÃ­a
                </a>
            </div>
        </div>
        <i class="bi bi-activity position-absolute top-0 end-0 opacity-25" style="font-size: 15rem; margin-top: -3rem; margin-right: -2rem;"></i>
    </div>

    <div class="mb-5">
        <div class="d-flex align-items-center justify-content-between mb-4">
            <div class="d-flex align-items-center">
                <div class="bg-success bg-opacity-10 p-2 rounded-circle me-3 text-success">
                    <i class="bi bi-stars fs-4"></i>
                </div>
                <div>
                    <h3 class="fw-bold mb-0">Tu Plan Personalizado</h3>
                    <p class="text-muted mb-0">Recomendaciones basadas en tus objetivos.</p>
                </div>
            </div>
            
            <div class="d-none d-md-flex gap-2">
                <button class="btn btn-outline-secondary rounded-circle swiper-btn-prev">
                    <i class="bi bi-chevron-left"></i>
                </button>
                <button class="btn btn-outline-secondary rounded-circle swiper-btn-next">
                    <i class="bi bi-chevron-right"></i>
                </button>
            </div>
        </div>

        <div class="swiper mySwiper p-1"> <div class="swiper-wrapper">
                
                {% for rec in recomendaciones %}
                <div class="swiper-slide h-auto"> <div class="card h-100 border-0 shadow-sm hover-elevate transition-all">
                        <div class="card-body p-4 d-flex flex-column">
                            
                            <div class="d-flex align-items-center mb-3">
                                <div class="p-3 rounded-circle bg-{{ rec.color }} bg-opacity-10 text-{{ rec.color }} me-3">
                                    <i class="bi bi-{{ rec.icono }} fs-3"></i>
                                </div>
                                <h5 class="card-title fw-bold mb-0">{{ rec.titulo }}</h5>
                            </div>
                            
                            <p class="card-text text-muted mb-4 flex-grow-1">{{ rec.descripcion }}</p>
                            
                            <div class="d-grid mt-auto">
                                <a href="{% url 'habitos:crear_habito' %}?prefill={{ rec.titulo }}" class="btn btn-outline-{{ rec.color }} fw-bold border-2">
                                    <i class="bi bi-plus-lg me-2"></i>Activar HÃ¡bito
                                </a>
                            </div>

                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center text-muted">
                    <p>No hay recomendaciones disponibles por ahora.</p>
                </div>
                {% endfor %}

            </div>
            
            <div class="swiper-pagination position-relative mt-4 d-md-none"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card border-0 shadow-sm bg-dark text-white rounded-4">
                <div class="card-body p-4 d-flex align-items-center justify-content-between flex-wrap gap-3">
                    <div class="d-flex align-items-center">
                        <div class="p-3 rounded-circle bg-white bg-opacity-10 me-3">
                            <i class="bi bi-fire fs-3 text-warning"></i>
                        </div>
                        <div>
                            <h4 class="fw-bold mb-0">Racha Actual</h4>
                            <p class="text-white-50 mb-0">MantÃ©n el impulso, Â¡vuelve maÃ±ana!</p>
                        </div>
                    </div>
                    <div class="text-end">
                        <h2 class="display-6 fw-bold mb-0">0 <span class="fs-5 text-white-50">DÃ­as</span></h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<style>
    .hover-elevate {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .hover-elevate:hover {
        transform: translateY(-5px);
        box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;
    }
    /* Ajuste para que el carrusel no corte la sombra de las cards */
    .swiper {
        padding: 20px 10px !important;
        overflow: hidden !important; 
    }
    /* Aseguramos que las tarjetas tengan ancho fijo segÃºn Swiper */
    .swiper-slide {
        height: auto;
        display: flex; /* Para que el h-100 funcione dentro */
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    var swiper = new Swiper(".mySwiper", {
        slidesPerView: 1,      // MÃ³vil: 1 tarjeta
        spaceBetween: 20,      // Espacio entre tarjetas
        grabCursor: true,      // Manito al arrastrar
        navigation: {
            nextEl: ".swiper-btn-next",
            prevEl: ".swiper-btn-prev",
        },
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
            dynamicBullets: true,
        },
        breakpoints: {
            640: {
                slidesPerView: 2, // Tablet: 2 tarjetas
                spaceBetween: 20,
            },
            1024: {
                slidesPerView: 3, // Desktop: 3 tarjetas
                spaceBetween: 24,
            },
            1400: {               // Pantallas muy grandes
                slidesPerView: 3, 
                spaceBetween: 30,
            },
        },
    });
</script>
{% endblock content %}